type: 'library'
language: 'typescript'

workspace:
  inheritedTasks:
    exclude: ['buildPackage', 'format', 'format-write', 'lint', 'props-doc', 'test', 'typecheck']

tasks:
  build:
    command: 'noop'
    deps:
      - '~:minify'

  sass:
    command: 'sass'
    args:
      - '--load-path'
      - '../../../node_modules/'
      - '--style'
      - 'expanded'
      - '--source-map'
      - '--embed-sources'
      - '--no-error-css'
      - 'scss/:css/'

  postcss:
    command: 'postcss'
    args:
      - '--config'
      - 'postcss.config.js'
      - '--replace'
      - 'css/*.css'
      - '!css/*.min.css'
    deps:
      - '~:sass'

  minify:
    command: 'cleancss'
    args:
      - '-O1'
      - '--format'
      - 'breakWith=lf'
      - '--with-rebase'
      - '--source-map'
      - '--source-map-inline-sources'
      - '--output'
      - 'css/'
      - '--batch'
      - '--batch-suffix'
      - '.min'
      - 'css/*.css'
      - '!css/*.min.css'
    deps:
      - '~:postcss'

dependsOn:
  - 'design-tokens'
